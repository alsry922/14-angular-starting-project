### ë²ˆì—­

---

#### 1
**The idea behind can deactivate**  
**is that you can control whether a user**  
**is allowed to leave a page or not.**  
`canDeactivate`ì˜ ì•„ì´ë””ì–´ëŠ”  
ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë– ë‚  ìˆ˜ ìˆëŠ”ì§€  
ì œì–´í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.

---

#### 2
**Now to show you how the can deactivate route guard works,**  
**I'll go to that new task component.**  
**And then there in this file, below this class,**  
**I'll export a new constant called can leave edit page,**  
**or however you wanna name it,**  
**which should be of type can deactivate FN.**  
`canDeactivate` ë¼ìš°íŠ¸ ê°€ë“œê°€  
ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ë³´ì—¬ì£¼ê¸° ìœ„í•´,  
`NewTaskComponent`ë¡œ ì´ë™í•˜ê² ìŠµë‹ˆë‹¤.  
ê·¸ë¦¬ê³  ì´ íŒŒì¼ì—ì„œ í´ë˜ìŠ¤ ì•„ë˜ì—  
`canLeaveEditPage`ë¼ëŠ” ìƒˆ ìƒìˆ˜ë¥¼ ë‚´ë³´ë‚¼ ê²ƒì…ë‹ˆë‹¤.  
ì´ ì´ë¦„ì€ ì›í•˜ëŠ” ëŒ€ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìœ¼ë©°,  
íƒ€ì…ì€ `canDeactivateFn`ì´ì–´ì•¼ í•©ë‹ˆë‹¤.

---

#### 3
**And then that will be a function**  
**that receives information about the component**  
**you're trying to leave as a first argument.**  
**Though you should add angle brackets here**  
**to let TypeScript know to which component this will be tied.**  
**So here you should insert your component class name,**  
**new task component in my case.**  
**And that's then what will get here**  
**as a first input parameter.**  
ì´ í•¨ìˆ˜ëŠ” ì‚¬ìš©ìê°€ ë– ë‚˜ë ¤ê³  í•˜ëŠ”  
ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ ì •ë³´ë¥¼  
ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ê²Œ ë©ë‹ˆë‹¤.  
TypeScriptê°€ ì´ í•¨ìˆ˜ê°€ ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—  
ì—°ê²°ë ì§€ ì•Œ ìˆ˜ ìˆë„ë¡  
ì—¬ê¸°ì— êº¾ì‡ ê´„í˜¸(`< >`)ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.  
ì—¬ê¸°ì—ëŠ” ì»´í¬ë„ŒíŠ¸ í´ë˜ìŠ¤ ì´ë¦„ì„ ì…ë ¥í•´ì•¼ í•˜ë©°,  
ì €ì˜ ê²½ìš°ëŠ” `NewTaskComponent`ì…ë‹ˆë‹¤.  
ê·¸ë¦¬ê³  ì´ê²ƒì´ ì²« ë²ˆì§¸ ì…ë ¥ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.

---

#### 4
**The component instance which we're trying to leave.**  
**And you then also could accept a couple of other parameters**  
**with information about the current route, the current state**  
**of the router, and the next state that is expected**  
**if the navigation you're trying to trigger**  
**would be completed.**  
ìš°ë¦¬ê°€ ë– ë‚˜ë ¤ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ì¸ìŠ¤í„´ìŠ¤ì…ë‹ˆë‹¤.  
ê·¸ë¦¬ê³  í˜„ì¬ ë¼ìš°íŠ¸ ì •ë³´, í˜„ì¬ ë¼ìš°í„° ìƒíƒœ,  
ê·¸ë¦¬ê³  íƒìƒ‰ì´ ì™„ë£Œë˜ì—ˆì„ ë•Œ ì˜ˆìƒë˜ëŠ” ë‹¤ìŒ ìƒíƒœì™€ ê°™ì€  
ì¶”ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

---

#### 5
**Now here I only care about the component,**  
**but you could add all these other input parameters as well.**  
ì—¬ê¸°ì„œëŠ” ì»´í¬ë„ŒíŠ¸ì—ë§Œ ê´€ì‹¬ì´ ìˆì§€ë§Œ,  
ì´ëŸ¬í•œ ë‹¤ë¥¸ ì…ë ¥ ë§¤ê°œë³€ìˆ˜ë“¤ë„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

#### 6
**Well, and since component is now that component instance**  
**which I'm trying to leave, we could for example,**  
**access its properties and take a look at them.**  
**And see if they contain any data that we might lose**  
**if we're navigating away.**  
ì»´í¬ë„ŒíŠ¸ëŠ” ìš°ë¦¬ê°€ ë– ë‚˜ë ¤ê³  í•˜ëŠ”  
ì»´í¬ë„ŒíŠ¸ ì¸ìŠ¤í„´ìŠ¤ì´ê¸° ë•Œë¬¸ì—,  
ì˜ˆë¥¼ ë“¤ì–´ í•´ë‹¹ ì†ì„±ì— ì ‘ê·¼í•˜ì—¬ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ê·¸ë¦¬ê³  íƒìƒ‰ ì‹œ ì†ì‹¤ë  ê°€ëŠ¥ì„±ì´ ìˆëŠ”  
ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

#### 7
**So we can check if component entered title,**  
**if we read that value, if it's truthy.**  
**Or if component entered date is truthy,**  
**or if component entered summary is truthy.**  
ë”°ë¼ì„œ `component.enteredTitle` ê°’ì„ ì½ì–´ì„œ  
ì°¸ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ë˜ëŠ” `component.enteredDate`ë‚˜  
`component.enteredSummary` ê°’ì´ ì°¸ì¸ì§€ë„  
í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

#### 8
**And if any of these properties is truthy,**  
**it means that it contains data that was inserted**  
**by the user, and that in turn**  
**means that we might not want to navigate away.**  
ì´ ì†ì„± ì¤‘ í•˜ë‚˜ë¼ë„ ì°¸ì´ë¼ë©´,  
ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤ëŠ” ëœ»ì´ë©°,  
ë”°ë¼ì„œ í˜ì´ì§€ë¥¼ ë– ë‚˜ì§€ ì•Šë„ë¡  
ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

#### 9
**At least not without asking.**  
**Now we can ask by calling window.confirm.**  
**So the confirm method is a built-in method**  
**that's provided by the browser**  
**that will open a confirmation dialogue**  
**where the user can choose yes or no.**  
ìµœì†Œí•œ ì‚¬ìš©ìì—ê²Œ í™•ì¸ì„ ìš”ì²­í•´ì•¼ í•©ë‹ˆë‹¤.  
ì´ë•Œ `window.confirm`ì„ í˜¸ì¶œí•˜ì—¬  
ì§ˆë¬¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
`confirm` ë©”ì„œë“œëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•˜ëŠ”  
ë‚´ì¥ ë©”ì„œë“œë¡œ,  
ì‚¬ìš©ìê°€ ì˜ˆ ë˜ëŠ” ì•„ë‹ˆìš”ë¥¼ ì„ íƒí•  ìˆ˜ ìˆëŠ”  
í™•ì¸ ëŒ€í™” ìƒìë¥¼ ì—½ë‹ˆë‹¤.

---

#### 10
**And confirm will indeed return a boolean depending on**  
**whether the user did click yes or no.**  
**In addition, confirm takes a message as an input**  
**that will be shown as part of that dialogue.**  
`confirm`ì€ ì‚¬ìš©ìê°€ ì˜ˆ ë˜ëŠ” ì•„ë‹ˆìš”ë¥¼  
ì„ íƒí–ˆëŠ”ì§€ì— ë”°ë¼  
ë¶ˆë¦¬ì–¸ ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤.  
ë˜í•œ, `confirm`ì€ ëŒ€í™” ìƒìì— í‘œì‹œë   
ë©”ì‹œì§€ë¥¼ ì…ë ¥ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

#### 11
**So here we could ask, do you really want to leave?**  
**You will lose the entered data, or anything like that.**  
**And as a result, as mentioned, we get true or false.**  
**And we can simply return that here**  
**as part of this guard function.**  
ì˜ˆë¥¼ ë“¤ì–´,  
"ì •ë§ë¡œ ë– ë‚˜ì‹œê² ìŠµë‹ˆê¹Œ? ì…ë ¥ëœ ë°ì´í„°ê°€ ì†ì‹¤ë©ë‹ˆë‹¤."  
ì™€ ê°™ì€ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ê²°ê³¼ì ìœ¼ë¡œ `true` ë˜ëŠ” `false`ê°€ ë°˜í™˜ë˜ë©°,  
ì´ë¥¼ ê°€ë“œ í•¨ìˆ˜ì˜ ì¼ë¶€ë¡œ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë²ˆì—­ ê³„ì†

---

#### 12
**If we're not inside of this if check,**  
**so if we have unchanged data, we can instead return true.**  
**So that then means**  
**that this guard function will always return true**  
**if the user has not entered any values.**  
ë§Œì•½ ì´ `if` ì¡°ê±´ë¬¸ ì•ˆì— ìˆì§€ ì•Šë‹¤ë©´,  
ì¦‰ ë°ì´í„°ê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ë‹¤ë©´,  
`true`ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì´ëŠ” ì‚¬ìš©ìê°€ ê°’ì„ ì…ë ¥í•˜ì§€ ì•Šì•˜ì„ ê²½ìš°  
ì´ ê°€ë“œ í•¨ìˆ˜ê°€ í•­ìƒ `true`ë¥¼ ë°˜í™˜í•œë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.

---

#### 13
**But if the user did enter values,**  
**we'll ask the user and will return true**  
**if the user chooses yes, and false otherwise.**  
**And if we return true, the user is allowed**  
**to leave the page and Angular will go ahead**  
**and perform that upcoming navigation action.**  
í•˜ì§€ë§Œ ì‚¬ìš©ìê°€ ê°’ì„ ì…ë ¥í•œ ê²½ìš°,  
ì‚¬ìš©ìì—ê²Œ í™•ì¸ì„ ìš”ì²­í•˜ë©°,  
ì‚¬ìš©ìê°€ "ì˜ˆ"ë¥¼ ì„ íƒí•˜ë©´ `true`ë¥¼ ë°˜í™˜í•˜ê³ ,  
ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ `false`ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.  
`true`ë¥¼ ë°˜í™˜í•˜ë©´ ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë– ë‚˜ëŠ” ê²ƒì´  
í—ˆìš©ë˜ë©°, AngularëŠ” íƒìƒ‰ ë™ì‘ì„ ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤.

---

#### 14
**Otherwise it will block it, essentially.**  
**Though only if we register this function**  
**as a can deactivate guard.**  
**So with it defined here, we should go back**  
**to our route definitions to this new task route.**  
**And then there you can add the can deactivate property**  
**to this route definition.**  
ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì ìœ¼ë¡œ íƒìƒ‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤.  
ë‹¤ë§Œ, ì´ í•¨ìˆ˜ê°€ `canDeactivate` ê°€ë“œë¡œ  
ë“±ë¡ëœ ê²½ìš°ì—ë§Œ ì‘ë™í•©ë‹ˆë‹¤.  
ì´ í•¨ìˆ˜ë¥¼ ì •ì˜í•œ í›„,  
ë¼ìš°íŠ¸ ì •ì˜ë¡œ ëŒì•„ê°€ `NewTask` ë¼ìš°íŠ¸ì—ì„œ  
`canDeactivate` ì†ì„±ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.

---

#### 15
**And just like can match or can activate,**  
**it takes an array of guards.**  
**And here it's then this can leave edit page guard function**  
**that you should add like this to this array.**  
**And just as before, you shouldn't execute it.**  
**You should just point at it.**  
`canMatch`ë‚˜ `canActivate`ì™€ ë§ˆì°¬ê°€ì§€ë¡œ,  
`canDeactivate`ë„ ê°€ë“œ ë°°ì—´ì„ ë°›ìŠµë‹ˆë‹¤.  
ì—¬ê¸°ì—ì„œëŠ” `canLeaveEditPage` ê°€ë“œ í•¨ìˆ˜ë¥¼  
ë°°ì—´ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.  
ì´ì „ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ,  
í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ì§€ ë§ê³ ,  
ë‹¨ìˆœíˆ ì°¸ì¡°ë§Œ í•´ì•¼ í•©ë‹ˆë‹¤.

---

#### 16
**With that change made, if you are entering something here**  
**and you click cancel, for example,**  
**you see that you'll be prompted here**  
**and if you click cancel, you'll stay on this page.**  
**It's only if you click okay that you will be navigated away.**  
ì´ ë³€ê²½ì„ ì ìš©í•˜ë©´,  
ì—¬ê¸°ì— ë°ì´í„°ë¥¼ ì…ë ¥í•œ ìƒíƒœì—ì„œ  
ì˜ˆë¥¼ ë“¤ì–´ ì·¨ì†Œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´,  
í™•ì¸ ëŒ€í™” ìƒìê°€ í‘œì‹œë©ë‹ˆë‹¤.  
ì´ë•Œ ì·¨ì†Œë¥¼ í´ë¦­í•˜ë©´ í˜„ì¬ í˜ì´ì§€ì— ë¨¸ë¬¼ê³ ,  
"í™•ì¸"ì„ í´ë¦­í•´ì•¼ë§Œ íƒìƒ‰ì´ ì§„í–‰ë©ë‹ˆë‹¤.

---

#### 17
**And that shows you how can deactivate works.**  
**It allows you to add a guard that makes sure**  
**that unintended page changes are prevented**  
**before they're even initialized.**  
ì´ê²ƒì´ `canDeactivate`ê°€ ì‘ë™í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.  
ì´ ê°€ë“œëŠ” íƒìƒ‰ì´ ì‹œì‘ë˜ê¸° ì „ì—  
ì˜ˆê¸°ì¹˜ ì•Šì€ í˜ì´ì§€ ë³€ê²½ì„ ë°©ì§€í•  ìˆ˜ ìˆë„ë¡  
ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

ë” í•„ìš”í•˜ì‹  ë‚´ìš©ì´ ìˆìœ¼ë©´ ë§ì”€í•´ì£¼ì„¸ìš”! ğŸ˜Š
